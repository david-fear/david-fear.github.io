<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>My GitHub Static Site Template</title>

<link rel="stylesheet" href="https://david-fear.github.io/stylesheet.css" />
</head>

<body>

  <!-- Dynamic sidebar menu -->
<div id="menu-container"></div>

<script>
  fetch('menu.html')
    .then(response => response.text())
    .then(data => {
      const container = document.getElementById('menu-container');
      container.innerHTML = data;

      // Now attach event listeners because the elements exist
      const toggle = document.getElementById('menu-toggle');
      const menu = document.getElementById('menu-nav');

      toggle.addEventListener('click', () => {
        const expanded = toggle.getAttribute('aria-expanded') === 'true';
        toggle.setAttribute('aria-expanded', String(!expanded));
        if (menu.hasAttribute('hidden')) {
          menu.removeAttribute('hidden');
        } else {
          menu.setAttribute('hidden', '');
        }
      });

      toggle.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          toggle.click();
        }
      });
    })
    .catch(e => console.error('Failed to load menu:', e));
</script>

  <header>
    <h1>Formula One - Links</h1>
    <p>The Best 2025 Links - centered around Liam Lawson</p>
  </header>

  <main>
    <section>
      <h2 class="mid">Racing Bulls Performance</h2>
      <p class="mid"><b>Isack Hadjar</b> vs <b>Liam Lawson</b> (H2H)</p>
      <table class="midtable">
        <tr>
          <td width="60px;">2025</td>
          <td width="100px;"><a href="https://www.f1teammatequali.com/quali_season?season-quali=2025&constructor-id-quali=211&driver-1-id-season-quali=460&driver-2-id-season-quali=347">Qualifying</a></td>
          <td><a href="https://www.f1teammatequali.com/race_season?season-race=2025&constructor-id-race=211&driver-1-id-season-race=460&driver-2-id-season-race=347">Race</a></td>
        </tr>
      </table>
    </section>
    
    <section>
      <h2 class="mid">x.com (ex-Twitter)</h2>
      <table class="midtable">
        <tr>
          <td width="120px;"><p>F1 Troll</p></td>
          <td><a href="https://x.com/f1trollofficial">https://x.com/f1trollofficial</a></td>
        </tr>
        <tr>
          <td><p>F1 Visualized</p></td>
          <td><p><a href="https://x.com/f1visualized">https://x.com/f1visualized</a></p></td>
      </table>
    </section>

    <section>
      <h2 class="mid">Other Links</h2>
      <table class="midtable">
        <tr>
          <td width="200px;"><p>F1 Countdown</p></td>
          <td><a href="https://formulacountdown.com/">https://formulacountdown.com/</a></td>
        </tr>
        <tr>
          <td width="200px;"><p>F1 Pace</p></td>
          <td><a href="https://f1pace.com/">https://f1pace.com/</a></td>
        </tr>
        <tr>
          <td><p>Youtube - TacticalRab</p></td>
          <td><p><a href="https://www.youtube.com/@F1NewsTR/videos">https://www.youtube.com/@F1NewsTR</a></p></td>
        </tr>
        <tr>
          <td><p>Youtube - LawVS</p></td>
          <td><p><a href="https://www.youtube.com/@LawVS/videos">https://www.youtube.com/@LawVS</a></p></td>
        </tr>
      </table>
    </section>

    <section>
      <h2 class="mid">Next Race</h2>
        <div id="race-info">
    Loading next race details...
  </div>

<script>
  async function fetchNextRace() {
    try {
      const proxyUrl = 'https://api.allorigins.win/raw?url=';
      const apiUrl = 'https://ergast.com/api/f1/current/next.json';

      const res = await fetch(proxyUrl + encodeURIComponent(apiUrl));
      const data = await res.json();

      const race = data.MRData.RaceTable.Races[0];
      if (!race) {
        document.getElementById('race-info').textContent = "No upcoming races found.";
        return;
      }

      const raceName = race.raceName;
      const circuit = race.Circuit.circuitName;
      const location = race.Circuit.Location.locality + ", " + race.Circuit.Location.country;
      const raceDateTimeUTC = race.date + "T" + race.time;
      const raceDate = new Date(raceDateTimeUTC);

      const optionsDate = { year: 'numeric', month: 'long', day: 'numeric' };
      const optionsTime = { hour: '2-digit', minute: '2-digit', timeZoneName: 'short' };
      const localDate = raceDate.toLocaleDateString(undefined, optionsDate);
      const localTime = raceDate.toLocaleTimeString(undefined, optionsTime);

      document.getElementById('race-info').innerHTML = `
        <strong>${raceName}</strong><br/>
        Circuit: ${circuit} (${location})<br/>
        Date: ${localDate}<br/>
        Time: ${localTime}
      `;
    } catch (error) {
      document.getElementById('race-info').textContent = "Failed to load race data.";
      console.error(error);
    }
  }

  fetchNextRace();
</script>
    </section>
  </main>

  <!-- Footer placeholder -->
<div id="footer-container"></div>

<script>
  fetch('footer.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('footer-container').innerHTML = data;
    })
    .catch(error => {
      console.error('Failed to load footer:', error);
    });
</script>
  
</body>
</html>
