<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>What's My IP</title>

<link rel="stylesheet" href="https://david-fear.github.io/stylesheet.css" />

<style>
  #ip { font-size: 2em; text-align: center; }
</style>
</head>

<body>

<!-- Dynamic sidebar menu START - right after BODY tag -->
<div id="menu-container"></div>
<script>
  fetch('https://david-fear.github.io/menu.html')
    .then(response => response.text())
    .then(data => {
      const container = document.getElementById('menu-container');
      container.innerHTML = data;

      // Now attach event listeners because the elements exist
      const toggle = document.getElementById('menu-toggle');
      const menu = document.getElementById('menu-nav');

      toggle.addEventListener('click', () => {
        const expanded = toggle.getAttribute('aria-expanded') === 'true';
        toggle.setAttribute('aria-expanded', String(!expanded));
        if (menu.hasAttribute('hidden')) {
          menu.removeAttribute('hidden');
        } else {
          menu.setAttribute('hidden', '');
        }
      });

      toggle.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          toggle.click();
        }
      });
    })
    .catch(e => console.error('Failed to load menu:', e));
</script>
<!-- Dynamic sidebar menu END -->


  <header>
    <h1>IP Address</h1>
    <p>Your IP Address is:</p>
  </header>

  <main>
    <section>
    <div id="ip">Loading...</div>
    <script>
        async function fetchIP() {
            try {
                // Use a public IP API
                let response = await fetch('https://api.ipify.org?format=json');
                let data = await response.json();
                document.getElementById('ip').textContent = data.ip;
            } catch (error) {
                document.getElementById('ip').textContent = 'Unable to fetch IP';
                console.error(error);
            }
        }
        fetchIP();
    </script>
   </section>
  </main>

  <!-- Footer placeholder -->
<div id="footer-container"></div>

<script>
  fetch('https://david-fear.github.io/footer.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('footer-container').innerHTML = data;
    })
    .catch(error => {
      console.error('Failed to load footer:', error);
    });
</script>
  
</body>
</html>
