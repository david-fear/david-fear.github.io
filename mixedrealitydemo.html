<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Cool Mixed Reality Demo</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
    <style>
      body, html { margin: 0; height: 100%; overflow: hidden; }
    </style>
  </head>
  <body>
    <a-scene
      background="color: #222"
      vr-mode-ui="enterVRButton: true"
      renderer="antialias: true"
      embedded
      teleport-controls="button: trigger; collisionEntities: #floor"
    >
      <!-- Ambient and directional light -->
      <a-entity light="type: ambient; intensity: 0.5"></a-entity>
      <a-entity light="type: directional; intensity: 1" position="1 4 2"></a-entity>

      <!-- Floor to teleport on -->
      <a-plane
        id="floor"
        position="0 0 0"
        rotation="-90 0 0"
        width="10"
        height="10"
        color="#444"
        static-body
      ></a-plane>

      <!-- Spinning box with color animation -->
      <a-box
        id="interactiveBox"
        position="0 1.5 -3"
        rotation="0 45 0"
        depth="1"
        height="1"
        width="1"
        color="#4CC3D9"
        animation__spin="property: rotation; to: 0 405 0; loop: true; dur: 8000; easing: linear"
      ></a-box>

      <!-- Floating pulsating text -->
      <a-text
        value="Hello Mixed Reality!"
        position="0 2.5 -3"
        align="center"
        color="#FFF"
        width="6"
        animation__pulse="property: scale; dir: alternate; dur: 2000; loop: true; to: 1.2 1.2 1.2"
      ></a-text>

      <!-- Camera and controllers -->
      <a-entity id="rig" position="0 1.6 0">
        <a-entity
          id="camera"
          camera
          look-controls
          wasd-controls="fly: true; acceleration: 20"
          position="0 0 0"
        ></a-entity>

        <!-- Left hand controller -->
        <a-entity
          laser-controls="hand: left"
          raycaster="objects: #interactiveBox"
          line="color: cyan"
          teleport-controls="button: grip; collisionEntities: #floor"
        ></a-entity>

        <!-- Right hand controller -->
        <a-entity
          laser-controls="hand: right"
          raycaster="objects: #interactiveBox"
          line="color: cyan"
          teleport-controls="button: grip; collisionEntities: #floor"
        ></a-entity>
      </a-entity>

      <script>
        // Change box color over time
        const box = document.querySelector('#interactiveBox');
        let hue = 0;

        function animateColor() {
          hue = (hue + 1) % 360;
          box.setAttribute('color', `hsl(${hue}, 100%, 50%)`);
          requestAnimationFrame(animateColor);
        }
        animateColor();

        // When box is clicked, randomly change its size
        box.addEventListener('click', () => {
          const newSize = Math.random() * 2 + 0.5; // 0.5 to 2.5
          box.setAttribute('scale', `${newSize} ${newSize} ${newSize}`);
        });
      </script>
    </a-scene>
  </body>
</html>
